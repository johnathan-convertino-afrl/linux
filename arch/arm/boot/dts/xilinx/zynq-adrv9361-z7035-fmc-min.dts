// SPDX-License-Identifier: GPL-2.0
/*
 * AD9361-Z0735 System on Module (SOM) SDR - FMC Carrier
 * Link: https://www.analog.com/ADRV9361-Z7035
 * Link: https://wiki.analog.com/resources/eval/user-guides/adrv936x_rfsom
 *
 * hdl_project: <adrv9361z7035/ccfmc_lvds>
 * board_revision: <>
 *
 * Copyright 2015-2019 Analog Devices Inc.
 */
/dts-v1/;
#include "zynq-adrv9361-z7035-min.dtsi"

#include <dt-bindings/input/input.h>

/ {
	clocks {
		ad9517_ref_clk: clock@3 {
				#clock-cells = <0>;
				compatible = "fixed-clock";
				clock-frequency = <25000000>;
				clock-output-names = "ad9517_refclk";
		};
	};
};

&axi_i2c0 {

	i2cswitch@70 {
		compatible = "nxp,pca9548";
		#address-cells = <1>;
		#size-cells = <0>;
		reg = <0x70>;

		i2c@0 {
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <0>;
		};

		i2c@1 {
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <1>;
		};

		i2c@2 {
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <2>;
		};

		i2c@3 {
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <3>;
		};

		i2c@4 {
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <4>;
		};

		i2c@5 {
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <5>;
			eeprom@50 {
				compatible = "at24,24c32";
				reg = <0x50>;
			};
		};

		i2c@6 {
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <6>;

			ad7291@2f {
				compatible = "adi,ad7291";
				reg = <0x2f>;
			};
		};

		i2c@7 {
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <7>;
		};
	};
};

/ {
	fpga_axi: fpga-axi@0 {
		compatible = "simple-bus";
		#address-cells = <0x1>;
		#size-cells = <0x1>;
		ranges;

		leds {
			compatible = "gpio-leds";
			led0 {
				label = "led0:red";
				gpios = <&gpio0 61 0>;
			};

			led1 {
				label = "led1:red";
				gpios = <&gpio0 59 0>;
			};

			led2 {
				label = "led2:red";
				gpios = <&gpio0 58 0>;
			};

			led3 {
				label = "led3:red";
				gpios = <&gpio0 60 0>;
			};
		};

		gpio_keys {
			compatible = "gpio-keys";
			#address-cells = <1>;
			#size-cells = <0>;
			autorepeat;

			bt0 {
				label = "BT0";
				linux,code = <KEY_LEFT>;
				gpios = <&gpio0 54 0>;
			};

			bt1 {
				label = "BT1";
				linux,code = <KEY_RIGHT>;
				gpios = <&gpio0 55 0>;
			};

			bt2 {
				label = "BT2";
				linux,code = <KEY_ENTER>;
				gpios = <&gpio0 56 0>;
			};

			bt3 {
				label = "BT3";
				linux,code = <KEY_ESC>;
				gpios = <&gpio0 57 0>;
			};

			sw0 {
				label = "SW0";
				linux,input-type = <5>;
				linux,code = <13>;
				gpios = <&gpio0 65 0>;
			};

			sw1 {
				label = "SW1";
				linux,input-type = <5>;
				linux,code = <1>;
				gpios = <&gpio0 62 0>;
			};

			sw2 {
				label = "SW2";
				linux,input-type = <5>;
				linux,code = <2>;
				gpios = <&gpio0 64 0>;
			};

			sw3 {
				label = "SW3";
				linux,input-type = <5>;
				linux,code = <3>;
				gpios = <&gpio0 63 0>;
			};
		};
	};
};

&spi0 {
	clk_ad9517: ad9517@1 {
		#address-cells = <1>;
		#size-cells = <0>;
		#clock-cells = <1>;
		compatible = "adi,ad9517-3";
		reg = <1>;
		spi-max-frequency = <10000000>;
		clocks = <&ad9517_ref_clk>, <&ad9517_ref_clk>;
		clock-names = "refclk", "clkin";
		clock-output-names = "out0", "out1", "out2", "out3", "out4", "out5", "out6", "out7";
		firmware = "pzsdr-fmc-ad9517.stp";
	};
};
